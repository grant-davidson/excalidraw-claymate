(this["webpackJsonpexcalidraw-claymate"]=this["webpackJsonpexcalidraw-claymate"]||[]).push([[0],{16:function(e,t,n){e.exports=n(46)},21:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(8),c=n.n(i),o=(n(21),n(3)),u=n(11),l=n.n(u),s=(n(44),n(4)),d=n(1),f=n.n(d),h=n(2),m=n(15),b=n(14),v=n(12),w=n.n(v),g=n(13),p=(n(45),"Any unsaved changes will be lost.  Are you sure?"),E=function(e){var t=e.snapshot,n=Object(a.useRef)(null);return Object(a.useEffect)((function(){if(n.current){var e=n.current.getContext("2d");e&&e.putImageData(t.imageData,0,0)}}),[t]),r.a.createElement("canvas",{ref:n,width:t.width,height:t.height})},y=function(e){var t=e.lastElementsRef,n=Object(a.useState)([]),i=Object(o.a)(n,2),c=i[0],u=i[1],l=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(a.useCallback)((function(e){if(n)return e?(e.returnValue=p,e.preventDefault(),e):p}),[n]);return Object(a.useEffect)((function(){return window.addEventListener("beforeunload",i),function(){window.removeEventListener("beforeunload",i)}}),[i]),r}(),d=function(e){u(e),l(!0)};return r.a.createElement("div",{className:"Claymate"},r.a.createElement("div",{className:"Claymate-snapshots"},c.map((function(e,t){return r.a.createElement("div",{key:e.id,className:"Claymate-snapshot"},r.a.createElement(E,{snapshot:e}),r.a.createElement("button",{type:"button",className:"Claymate-delete","aria-label":"Delete",onClick:function(){return t=e.id,void d((function(e){return e.filter((function(e){return e.id!==t}))}));var t}},"\u2716"),r.a.createElement("button",{type:"button",className:"Claymate-left","aria-label":"Move Left",disabled:0===t,onClick:function(){return t=e.id,void d((function(e){var n=e.findIndex((function(e){return e.id===t})),a=Object(s.a)(e);return a[n-1]=e[n],a[n]=e[n-1],a}));var t}},"\u2b05"),r.a.createElement("button",{type:"button",className:"Claymate-right","aria-label":"Move Right",disabled:t===c.length-1,onClick:function(){return t=e.id,void d((function(e){var n=e.findIndex((function(e){return e.id===t})),a=Object(s.a)(e);return a[n+1]=e[n],a[n]=e[n+1],a}));var t}},"\u27a1"))}))),r.a.createElement("div",{className:"Claymate-buttons"},r.a.createElement("button",{type:"button",onClick:function(){var e=function(e,t){var n=Object(g.exportToCanvas)({elements:e.current}),a=t?t.width:n.width,r=t?t.height:n.height,i=n.getContext("2d");return{id:Object(m.a)(),width:a,height:r,imageData:i.getImageData(0,0,a,r)}}(t,c[0]&&{width:c[0].width,height:c[0].height});d((function(t){return[].concat(Object(s.a)(t),[e])}))}},"Add snapshot"),r.a.createElement("button",{type:"button",onClick:function(){var e=new w.a;c.forEach((function(t){e.addFrame(t.imageData)})),e.on("finished",function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)(t,{fileName:"excalidraw-claymate.gif"});case 2:l(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.render()},disabled:0===c.length},"Export GIF"),r.a.createElement("button",{type:"button",onClick:function(){d((function(e){return Object(s.a)(e).reverse()}))},disabled:c.length<=1},"Reverse order")))},O=function(){try{var e=JSON.parse(localStorage.getItem("excalidraw-elements")||"");return e.appState.collaborators=new Map,e}catch(t){return null}}(),j=function(){var e=Object(a.useRef)([]),t=Object(a.useState)({width:window.innerWidth,height:window.innerHeight}),n=Object(o.a)(t,2),i=n[0],c=n[1];Object(a.useEffect)((function(){var e=function(){c({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]);var u=i.width,s=i.height;return r.a.createElement("div",{className:"ClaymateApp"},r.a.createElement(l.a,{width:u,height:s,initialData:O,onChange:function(t,n){var a;e.current=t,a={elements:t,appState:n},localStorage.setItem("excalidraw-elements",JSON.stringify(a))}}),r.a.createElement(y,{lastElementsRef:e}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.b649c18a.chunk.js.map