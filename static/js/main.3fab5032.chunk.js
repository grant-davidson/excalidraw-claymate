(this["webpackJsonpexcalidraw-claymate"]=this["webpackJsonpexcalidraw-claymate"]||[]).push([[0],{136:function(e,t,n){},137:function(e,t,n){},138:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(22),c=n.n(i),o=(n(44),n(8)),l=n(4),u=n(7),d=n.n(u),s=n(23),f=n.n(s),m=(n(136),n(6)),b=n(1),h=n.n(b),g=n(2),v=n(38),p=(n(137),"Any unsaved changes will be lost.  Are you sure?"),w=n(17),y=n(37),x=n.n(y),O=function(e){return new Promise((function(t){var n=new x.a;e.forEach((function(e){n.addFrame(e.imageData)})),n.on("finished",(function(e){Object(w.a)(e,{fileName:"excalidraw-claymate.gif"}).then(t)})),n.render()}))},E=function(){var e=Object(g.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="\n    <html>\n      <style>\n        svg { width: 100%; height: 100%; }\n      </style>\n      <script>\n        let index = 0;\n        document.addEventListener('DOMContentLoaded', () => {\n          document.getElementById('scene' + index).style.display = 'block';\n        });\n        document.addEventListener('keydown', (event) => {\n          if (event.key === 'ArrowRight' && index < ".concat(t.length-1,") {\n            document.getElementById('scene' + index).style.display = 'none';\n            index += 1;\n            document.getElementById('scene' + index).style.display = 'block';\n          }\n          if (event.key === 'ArrowLeft' && index > 0) {\n            document.getElementById('scene' + index).style.display = 'none';\n            index -= 1;\n            document.getElementById('scene' + index).style.display = 'block';\n          }\n          if (event.key.toLowerCase() === \"f\") {\n            if (document.fullscreenElement === document.body) {\n              document.exitFullscreen();\n            } else {\n              document.body.requestFullscreen();\n            }\n          }\n        });\n      <\/script>\n      <body>\n  "),t.forEach((function(e,t){var a=Object(u.exportToSvg)(e.drawing);a.id="scene".concat(t),a.style.display="none",n+=a.outerHTML})),n+="</body></html>",e.next=5,Object(w.a)(new Blob([n],{type:"text/html"}),{fileName:"excalidraw-claymate.html"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(e,t){var n=Object(u.exportToCanvas)({elements:e.elements}),a=t?t.width:n.width,r=t?t.height:n.height,i=n.getContext("2d");if(i)return{id:Object(v.a)(),width:a,height:r,imageData:i.getImageData(0,0,a,r),drawing:e}},k=function(e){var t=e.scene,n=Object(a.useRef)(null);return Object(a.useEffect)((function(){if(n.current){var e=n.current.getContext("2d");e&&e.putImageData(t.imageData,0,0)}}),[t]),r.a.createElement("canvas",{ref:n,width:t.width,height:t.height})},C=function(e){var t,n,i=e.drawing,c=e.onRestore,u=Object(a.useState)(),d=Object(l.a)(u,2),s=d[0],f=d[1],b=Object(a.useState)([]),v=Object(l.a)(b,2),w=v[0],y=v[1],x=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],i=Object(a.useCallback)((function(e){if(n)return e?(e.returnValue=p,e.preventDefault(),e):p}),[n]);return Object(a.useEffect)((function(){return window.addEventListener("beforeunload",i),function(){window.removeEventListener("beforeunload",i)}}),[i]),r}(),C=void 0!==s&&s<w.length?Object(o.a)(Object(o.a)({},w[s]),{},{drawing:i}):void 0,S=Object(a.useCallback)((function(e,t){y(e),x(!0),t&&(c(t.drawing),f(t.index))}),[x,f,c]),I=function(){var e=Object(g.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(w);case 2:x(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(g.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(w);case 2:x(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=Object(a.useCallback)((function(){if(i){var e=j(i,w[0]&&{width:w[0].width,height:w[0].height});e&&S((function(t){return[].concat(Object(m.a)(t),[e])}),{index:w.length,drawing:i})}}),[S,w,i]);return Object(a.useEffect)((function(){0===w.length&&L()}),[w,L]),null!=C&&1!==w.length&&(t=C.width,n=C.height),Object(a.useEffect)((function(){if(null!=s){var e=j(i,void 0===t||void 0===n?void 0:{width:t,height:n});e&&S((function(t){var n=Object(m.a)(t);return n[s]=e,n}),void 0)}}),[i,s,w.length,S,t,n]),r.a.createElement("div",{className:"Claymate"},r.a.createElement("div",{className:"Claymate-scenes"},w.map((function(e,t){return r.a.createElement("div",{key:e.id,className:"Claymate-scene ".concat(t===s?"Claymate-current-scene":""),onClick:function(){return function(e){c(w[e].drawing),f(e)}(t)}},r.a.createElement(k,{scene:e}),r.a.createElement("button",{type:"button",className:"Claymate-delete","aria-label":"Delete",onClick:function(t){t.stopPropagation(),function(e){var t=w.findIndex((function(t){return t.id===e}));if(t>=0){var n,a=w.length-1;a>0&&(n=t<a?t:a-1);var r=void 0!==n?{index:n,drawing:w[n].drawing}:void 0;S((function(t){return t.filter((function(t){return t.id!==e}))}),r)}}(e.id)}},"\u2716"),r.a.createElement("button",{type:"button",className:"Claymate-left","aria-label":"Move Left",disabled:0===t,onClick:function(t){t.stopPropagation(),function(e){var t=w.findIndex((function(t){return t.id===e}));S((function(e){var n=Object(m.a)(e);return n[t-1]=e[t],n[t]=e[t-1],n}),{index:t-1,drawing:w[t].drawing})}(e.id)}},"\u2b05"),r.a.createElement("button",{type:"button",className:"Claymate-right","aria-label":"Move Right",disabled:t===w.length-1,onClick:function(t){t.stopPropagation(),function(e){var t=w.findIndex((function(t){return t.id===e}));S((function(e){var n=Object(m.a)(e);return n[t+1]=e[t],n[t]=e[t+1],n}),{index:t+1,drawing:w[t].drawing})}(e.id)}},"\u27a1"))}))),r.a.createElement("div",{className:"Claymate-buttons"},r.a.createElement("button",{type:"button",onClick:L},"Add scene"),r.a.createElement("button",{type:"button",onClick:I,disabled:0===w.length},"Export GIF"),r.a.createElement("button",{type:"button",onClick:N,disabled:0===w.length},"Export HTML"),r.a.createElement("button",{type:"button",onClick:function(){S((function(e){return Object(m.a)(e).reverse()}),void 0!==s?{index:w.length-1-s,drawing:w[s].drawing}:void 0)},disabled:w.length<=1},"Reverse order")))},S=function(){try{var e=JSON.parse(localStorage.getItem("excalidraw-elements")||"");return e.appState.collaborators=new Map,e}catch(t){return null}}(),I=function(){var e=Object(a.useState)(S),t=Object(l.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(0),u=Object(l.a)(c,2),s=u[0],m=u[1];return r.a.createElement("div",{className:"ClaymateApp"},r.a.createElement(d.a,{key:s,initialData:S,onChange:function(e,t){var a;null!=n&&f()(e,n.elements)&&f()(t,n.appState)||i({elements:e.map((function(e){return Object(o.a)({},e)})),appState:Object(o.a)({},t)}),a={elements:e,appState:t},localStorage.setItem("excalidraw-elements",JSON.stringify(a))}}),r.a.createElement(C,{drawing:n,onRestore:function(e){m((function(e){return e+1})),S=e}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},39:function(e,t,n){e.exports=n(138)},44:function(e,t,n){}},[[39,1,2]]]);
//# sourceMappingURL=main.3fab5032.chunk.js.map